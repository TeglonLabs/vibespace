# Contributing to vibespace MCP Experience\n\nWe welcome contributions to the vibespace MCP Experience project! This document provides guidelines for contributing code, reporting issues, and suggesting improvements.\n\n## Table of Contents\n\n- [Code of Conduct](#code-of-conduct)\n- [Getting Started](#getting-started)\n- [Development Workflow](#development-workflow)\n- [Coding Standards](#coding-standards)\n- [Testing Guidelines](#testing-guidelines)\n- [Submitting Changes](#submitting-changes)\n- [Performance Considerations](#performance-considerations)\n- [Documentation](#documentation)\n- [Security](#security)\n\n## Code of Conduct\n\nThis project adheres to the Contributor Covenant Code of Conduct. By participating, you are expected to uphold this code.\n\n## Getting Started\n\n### Prerequisites\n\n- Go 1.24 or later\n- Git\n- Make (optional, but recommended)\n- Docker (for containerized development)\n\n### Setting Up Development Environment\n\n1. **Fork and clone the repository**\n   ```bash\n   git clone https://github.com/YOUR_USERNAME/vibespace-mcp-go.git\n   cd vibespace-mcp-go\n   ```\n\n2. **Install dependencies**\n   ```bash\n   go mod download\n   ```\n\n3. **Install development tools**\n   ```bash\n   make tools\n   # or manually:\n   go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest\n   go install golang.org/x/vuln/cmd/govulncheck@latest\n   go install golang.org/x/tools/cmd/goimports@latest\n   ```\n\n4. **Verify setup**\n   ```bash\n   make check\n   make test\n   ```\n\n## Development Workflow\n\n### Branch Naming Convention\n\n- `feature/description` - New features\n- `fix/description` - Bug fixes\n- `docs/description` - Documentation updates\n- `refactor/description` - Code refactoring\n- `perf/description` - Performance improvements\n- `test/description` - Test additions/improvements\n\n### Making Changes\n\n1. **Create a feature branch**\n   ```bash\n   git checkout -b feature/your-feature-name\n   ```\n\n2. **Make your changes following our coding standards**\n\n3. **Run tests and checks**\n   ```bash\n   make check\n   make test\n   make coverage\n   ```\n\n4. **Commit your changes**\n   ```bash\n   git add .\n   git commit -m \"feat: add new feature description\"\n   ```\n\n5. **Push and create a pull request**\n   ```bash\n   git push origin feature/your-feature-name\n   ```\n\n### Commit Message Format\n\nWe follow the [Conventional Commits](https://www.conventionalcommits.org/) specification:\n\n```\n<type>[optional scope]: <description>\n\n[optional body]\n\n[optional footer(s)]\n```\n\n**Types:**\n- `feat`: New feature\n- `fix`: Bug fix\n- `docs`: Documentation changes\n- `style`: Code style changes (formatting, etc.)\n- `refactor`: Code refactoring\n- `test`: Test additions/modifications\n- `chore`: Maintenance tasks\n- `perf`: Performance improvements\n- `ci`: CI/CD changes\n\n**Examples:**\n```\nfeat(streaming): add real-time progress tracking\nfix(repository): resolve concurrent access issue\ndocs: update API documentation\ntest(models): add comprehensive vibe validation tests\n```\n\n## Coding Standards\n\n### Go Style Guide\n\nWe follow the [Uber Go Style Guide](https://github.com/uber-go/guide/blob/master/style.md) with these additions:\n\n#### Package Organization\n\n```\n├── cmd/           # Main applications\n├── internal/      # Private application code\n├── pkg/          # Public library code\n├── models/       # Data models\n├── repository/   # Data access layer\n├── rpcmethods/   # RPC method implementations\n├── streaming/    # Streaming functionality\n├── tests/        # Integration tests\n└── examples/     # Example code\n```\n\n#### Naming Conventions\n\n- **Packages**: lowercase, single word when possible\n- **Variables**: camelCase\n- **Constants**: CamelCase or SCREAMING_SNAKE_CASE for exported constants\n- **Functions**: CamelCase (exported) or camelCase (unexported)\n- **Interfaces**: end with \"er\" when possible (e.g., `Reader`, `Writer`)\n\n#### Error Handling\n\n```go\n// Good: Wrap errors with context\nif err != nil {\n    return fmt.Errorf(\"failed to create vibe: %w\", err)\n}\n\n// Good: Use custom error types for API errors\ntype ValidationError struct {\n    Field   string\n    Message string\n}\n\nfunc (e ValidationError) Error() string {\n    return fmt.Sprintf(\"validation error on field %s: %s\", e.Field, e.Message)\n}\n```\n\n#### Context Usage\n\n```go\n// Good: Always pass context as first parameter\nfunc ProcessVibe(ctx context.Context, vibe *models.Vibe) error {\n    // Use ctx for cancellation and timeouts\n    select {\n    case <-ctx.Done():\n        return ctx.Err()\n    default:\n        // Process vibe\n    }\n}\n```\n\n#### Concurrency\n\n```go\n// Good: Use channels for communication\ntype VibeProcessor struct {\n    vibes   chan *models.Vibe\n    results chan *ProcessResult\n    done    chan struct{}\n}\n\n// Good: Proper mutex usage\ntype SafeCounter struct {\n    mu    sync.RWMutex\n    count map[string]int\n}\n\nfunc (c *SafeCounter) Get(key string) int {\n    c.mu.RLock()\n    defer c.mu.RUnlock()\n    return c.count[key]\n}\n```\n\n### Documentation Standards\n\n#### Package Documentation\n\n```go\n// Package models provides data structures for the vibespace MCP experience.\n//\n// The models package defines the core data types used throughout the application,\n// including Vibe, World, and related structures. All models include JSON\n// serialization tags and validation rules.\npackage models\n```\n\n#### Function Documentation\n\n```go\n// CreateVibe creates a new vibe with the specified properties.\n//\n// The function validates the input vibe and assigns a unique ID before\n// storing it in the repository. It returns an error if validation fails\n// or if the storage operation encounters an issue.\n//\n// Example:\n//\n//\tvibe := &models.Vibe{\n//\t\tName: \"Relaxed\",\n//\t\tIntensity: 0.7,\n//\t}\n//\tresult, err := repo.CreateVibe(ctx, vibe)\n//\tif err != nil {\n//\t\t// handle error\n//\t}\nfunc (r *Repository) CreateVibe(ctx context.Context, vibe *models.Vibe) (*models.Vibe, error) {\n    // implementation\n}\n```\n\n## Testing Guidelines\n\n### Test Organization\n\n- **Unit tests**: `*_test.go` files alongside source code\n- **Integration tests**: `tests/` directory\n- **Benchmarks**: `*_bench_test.go` or benchmark functions in test files\n\n### Test Naming\n\n```go\n// Function: TestFunctionName\nfunc TestCreateVibe(t *testing.T) { ... }\n\n// Method: TestType_Method\nfunc TestRepository_CreateVibe(t *testing.T) { ... }\n\n// Scenario: TestFunction_Scenario\nfunc TestCreateVibe_InvalidInput_ReturnsError(t *testing.T) { ... }\n```\n\n### Test Structure\n\nUse the Arrange-Act-Assert pattern:\n\n```go\nfunc TestRepository_CreateVibe(t *testing.T) {\n    // Arrange\n    repo := NewRepository()\n    vibe := &models.Vibe{\n        Name:      \"Test Vibe\",\n        Intensity: 0.5,\n    }\n\n    // Act\n    result, err := repo.CreateVibe(context.Background(), vibe)\n\n    // Assert\n    require.NoError(t, err)\n    assert.NotEmpty(t, result.ID)\n    assert.Equal(t, \"Test Vibe\", result.Name)\n    assert.Equal(t, 0.5, result.Intensity)\n}\n```\n\n### Table-Driven Tests\n\n```go\nfunc TestValidateVibe(t *testing.T) {\n    tests := []struct {\n        name    string\n        vibe    *models.Vibe\n        wantErr bool\n    }{\n        {\n            name: \"valid vibe\",\n            vibe: &models.Vibe{Name: \"Valid\", Intensity: 0.5},\n            wantErr: false,\n        },\n        {\n            name: \"empty name\",\n            vibe: &models.Vibe{Name: \"\", Intensity: 0.5},\n            wantErr: true,\n        },\n        {\n            name: \"invalid intensity\",\n            vibe: &models.Vibe{Name: \"Valid\", Intensity: 1.5},\n            wantErr: true,\n        },\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            err := ValidateVibe(tt.vibe)\n            if tt.wantErr {\n                assert.Error(t, err)\n            } else {\n                assert.NoError(t, err)\n            }\n        })\n    }\n}\n```\n\n### Test Coverage\n\n- **Minimum coverage**: 80% for new code\n- **Target coverage**: 90% for critical paths\n- Run coverage: `make coverage`\n\n### Benchmark Tests\n\n```go\nfunc BenchmarkCreateVibe(b *testing.B) {\n    repo := NewRepository()\n    vibe := &models.Vibe{Name: \"Benchmark\", Intensity: 0.5}\n\n    b.ResetTimer()\n    for i := 0; i < b.N; i++ {\n        _, err := repo.CreateVibe(context.Background(), vibe)\n        if err != nil {\n            b.Fatal(err)\n        }\n    }\n}\n```\n\n## Submitting Changes\n\n### Pull Request Process\n\n1. **Ensure your PR**:\n   - Follows coding standards\n   - Includes appropriate tests\n   - Updates documentation if needed\n   - Passes all CI checks\n\n2. **PR Title**: Use conventional commit format\n   ```\n   feat(streaming): add progress tracking for long operations\n   ```\n\n3. **PR Description Template**:\n   ```markdown\n   ## Description\n   Brief description of changes\n\n   ## Type of Change\n   - [ ] Bug fix\n   - [ ] New feature\n   - [ ] Breaking change\n   - [ ] Documentation update\n\n   ## Testing\n   - [ ] Unit tests added/updated\n   - [ ] Integration tests added/updated\n   - [ ] Manual testing performed\n\n   ## Checklist\n   - [ ] Code follows style guidelines\n   - [ ] Self-review completed\n   - [ ] Documentation updated\n   - [ ] No new warnings introduced\n   ```\n\n### Code Review Process\n\n1. **Automated checks** must pass\n2. **Peer review** by at least one maintainer\n3. **Address feedback** promptly\n4. **Squash commits** before merging\n\n## Performance Considerations\n\n### Memory Management\n\n- Use object pools for frequently allocated objects\n- Avoid memory leaks in goroutines\n- Profile memory usage for large datasets\n\n### Concurrency\n\n- Use context for cancellation\n- Limit goroutine spawning\n- Use buffered channels appropriately\n\n### Database Operations\n\n- Use transactions for multi-step operations\n- Implement proper connection pooling\n- Add database operation timeouts\n\n## Documentation\n\n### API Documentation\n\n- Use OpenAPI/Swagger specs for REST APIs\n- Include examples in documentation\n- Document error responses\n\n### Code Comments\n\n- Explain \"why\" not \"what\"\n- Document complex algorithms\n- Add TODO comments for future improvements\n\n## Security\n\n### Reporting Security Issues\n\nPlease report security vulnerabilities privately to [security@topos.com](mailto:security@topos.com).\n\n### Security Guidelines\n\n- Validate all inputs\n- Use secure random number generation\n- Implement proper authentication/authorization\n- Sanitize log outputs\n- Keep dependencies updated\n\n### Security Checklist\n\n- [ ] Input validation implemented\n- [ ] SQL injection prevention\n- [ ] XSS prevention\n- [ ] CSRF protection\n- [ ] Secure headers configured\n- [ ] Dependency vulnerabilities checked\n\n## Getting Help\n\n- **Documentation**: Check the [README](README.md) and docs/\n- **Issues**: Search existing issues before creating new ones\n- **Discussions**: Use GitHub Discussions for questions\n- **Chat**: Join our community chat (link in README)\n\n## Recognition\n\nContributors will be recognized in:\n- CONTRIBUTORS.md file\n- Release notes\n- Annual contributor appreciation posts\n\nThank you for contributing to vibespace MCP Experience!
